[mypy]
python_version = 3.13
namespace_packages = True
explicit_package_bases = True
ignore_missing_imports = False
warn_unused_ignores = True
warn_redundant_casts = True

# Sem subpastas específicas em mypy_path; idealmente remove/omite isto.
# Se precisares, põe só a raiz (.) ou diretórios de topo.
#mypy_path = .

files = services,src,infra,utils
exclude = ^graph/|^llm_evals/|^api_gateway_experiment\.py$

[mypy-bs4.*]
ignore_missing_imports = True
[mypy-playwright.*]
ignore_missing_imports = True
[mypy-requests.*]
ignore_missing_imports = True
[mypy-passlib.*]
ignore_missing_imports = True
[mypy-pgvector.*]
ignore_missing_imports = True
[mypy-jwt.*]
ignore_missing_imports = True
[mypy-langgraph.*]
ignore_missing_imports = True
[mypy-aio_pika.*]
ignore_missing_imports = True

[mypy-settings]
disable_error_code = call-arg
[mypy-services.rag_service.rag_settings]
disable_error_code = call-arg
[mypy-services.quizz_gen_service.quizz_settings]
disable_error_code = call-arg
[mypy-services.evaluation_service.eval_settings]
disable_error_code = call-arg

[mypy-services.*]
ignore_missing_imports = False

[mypy-services.evaluation_service.mq_consumer]
disable_error_code = arg-type

# Ignorar todo o pacote graph (é importado indiretamente e ainda está em WIP)
[mypy-graph.*]
ignore_errors = True

# Módulos locais importados sem base de pacote (names curtos)
[mypy-rag_settings]
ignore_missing_imports = True
[mypy-quizz_settings]
ignore_missing_imports = True
[mypy-eval_settings]
ignore_missing_imports = True
[mypy-cache]
ignore_missing_imports = True
[mypy-model]
ignore_missing_imports = True
[mypy-data_models]
ignore_missing_imports = True
[mypy-logging_config]
ignore_missing_imports = True
[mypy-db]
ignore_missing_imports = True
[mypy-auth_client]
ignore_missing_imports = True
[mypy-mq]
ignore_missing_imports = True
[mypy-mq_consumer]
ignore_missing_imports = True
[mypy-persistence]
ignore_missing_imports = True

# Quizz utils: ruídos de tipos/atribuição e warns de unused-ignore
[mypy-services.quizz_gen_service.quizz_utils]
disable_error_code = arg-type,assignment,unused-ignore

# Modelos com retornos de BaseMessage que mypy espera str (interino)
[mypy-services.evaluation_service.model]
disable_error_code = return-value,import-not-found
[mypy-utils.models]
disable_error_code = return-value,arg-type
