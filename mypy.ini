[mypy]
python_version = 3.13
namespace_packages = True
explicit_package_bases = True
ignore_missing_imports = False
warn_unused_ignores = True
warn_redundant_casts = True
mypy_path =
  services/auth_service,
  services/rag_service,
  services/evaluation_service,
  services/quizz_gen_service,
  src,
  infra,
  graph,
  utils

# Excluir diretórios/arquivos experimentais do tipado por ora
exclude = (?x)(
  ^graph/|
  ^llm_evals/|
  ^api_gateway_experiment\.py$
)

# Terceiros sem stubs → ignorar missing imports
[mypy-bs4.*]
ignore_missing_imports = True
[mypy-playwright.*]
ignore_missing_imports = True
[mypy-requests.*]
ignore_missing_imports = True
[mypy-passlib.*]
ignore_missing_imports = True
[mypy-pgvector.*]
ignore_missing_imports = True
[mypy-jwt.*]
ignore_missing_imports = True
[mypy-langgraph.*]
ignore_missing_imports = True
[mypy-aio_pika.*]
ignore_missing_imports = True

# Settings do Pydantic: ignore “call-arg” (faltam envs no static check)
[mypy-settings]
disable_error_code = call-arg
[mypy-services.rag_service.rag_settings]
disable_error_code = call-arg
[mypy-services.quizz_gen_service.quizz_settings]
disable_error_code = call-arg
[mypy-services.evaluation_service.eval_settings]
disable_error_code = call-arg

# Módulos locais importados sem package base (resolvemos via mypy_path)
[mypy-services.*]
ignore_missing_imports = False

# Pontos específicos com tipos ruidosos → permitimos por ora
[mypy-services.evaluation_service.mq_consumer]
disable_error_code = arg-type